{"remainingRequest":"/Users/jiweiqing/开发/GitHub/jwq-count-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jiweiqing/开发/GitHub/jwq-count-app/src/views/Home/index.vue?vue&type=style&index=1&lang=scss&","dependencies":[{"path":"/Users/jiweiqing/开发/GitHub/jwq-count-app/src/views/Home/index.vue","mtime":1573372273027},{"path":"/Users/jiweiqing/开发/GitHub/jwq-count-app/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/jiweiqing/开发/GitHub/jwq-count-app/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/jiweiqing/开发/GitHub/jwq-count-app/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/jiweiqing/开发/GitHub/jwq-count-app/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jiweiqing/开发/GitHub/jwq-count-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jiweiqing/开发/GitHub/jwq-count-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.qrCodeDiv {\n    img {\n        margin: auto;\n    }\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmHA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/Home","sourcesContent":["<template>\n    <div>\n        <mt-header fixed title=\"小吉计分\"></mt-header>\n        <div style=\"margin-top:60px;\">\n            <div style=\"padding:1rem;\">\n                <mt-button type=\"default\">提示：请扫房主二维码进入房间</mt-button>\n            </div>\n            <!-- 房间二维码 -->\n            <div v-show=\"state\">\n                <div ref=\"qrCodeDiv\" class=\"qrCodeDiv\" style=\"padding:1rem;\"></div>\n                <div>\n                    <mt-field label=\"房间名称\" placeholder=\"请输入房间名称\" v-model.trim=\"roomName\" disabled></mt-field>\n                </div>\n                <div>\n                    <mt-field\n                        label=\"房间人数\"\n                        placeholder=\"请输入房间人数\"\n                        type=\"number\"\n                        v-model.trim=\"roomNum\"\n                        disabled\n                    ></mt-field>\n                </div>\n                <div style=\"padding-top:2rem;\">\n                    <mt-button type=\"primary\" @click=\"toRoom\" plain>直接进入房间</mt-button>\n                </div>\n            </div>\n            <!-- 创建房间 -->\n            <div style=\"padding-top:2rem;\" v-show=\"!state\">\n                <div>\n                    <mt-field label=\"房间名称\" placeholder=\"请输入房间名称\" v-model.trim=\"roomName\"></mt-field>\n                </div>\n                <div>\n                    <mt-field\n                        label=\"房间人数\"\n                        placeholder=\"请输入房间人数\"\n                        type=\"number\"\n                        v-model.trim=\"roomNum\"\n                    ></mt-field>\n                </div>\n                <div style=\"padding-top:2rem;\">\n                    <mt-button type=\"primary\" @click=\"createRoom\" plain>生成房间二维码</mt-button>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Vue } from \"vue-property-decorator\";\nimport { Toast } from \"mint-ui\";\nimport { createRoom } from \"@/req/count\";\nimport QRCode from \"qrcodejs2\";\n@Component\nexport default class Home extends Vue {\n    public QRcode: any = {};\n    public roomId = \"\";\n    public roomName =\n        \"房号\" +\n        new Date()\n            .getTime()\n            .toString(36)\n            .slice(-8);\n    public roomNum = 4;\n    public state = false;\n    public back() {\n        window.location.reload();\n    }\n    public toRoom() {\n        this.$fn.toRoom(this.roomId);\n    }\n    public async createRoom() {\n        if (this.roomName === \"\") {\n            return Toast({\n                message: \"您的房间名称不正确！\",\n                iconClass: \"icon icon-error\",\n                position: \"top\"\n            });\n        }\n        if (!/\\d+/.test(String(this.roomNum))) {\n            return Toast({\n                message: \"您的房间人数不正确\",\n                iconClass: \"icon icon-error\",\n                position: \"top\"\n            });\n        }\n        let href = \"https://jiweiqing.cn\";\n        const res: any = await this.$fn.showMsgResponse(\n            await createRoom({\n                roomName: this.roomName,\n                count: this.roomNum\n            })\n        );\n        this.roomId = res.roomId;\n        href = this.$fn.getQrRoomHref(res.roomId);\n        this.state = true;\n        if (this.QRcode.clear) {\n            return this.QRcode.makeCode(\n                this.$fn.getQrRoomHref(this.$route.params.roomId)\n            );\n        }\n        this.QRcode = new QRCode(this.$refs.qrCodeDiv, {\n            text: this.$fn.getQrRoomHref(res.roomId),\n            width: 200,\n            height: 200,\n            colorDark: \"#333333\", // 二维码颜色\n            colorLight: \"#ffffff\", // 二维码背景色\n            correctLevel: QRCode.CorrectLevel.L // 容错率，L/M/H\n        });\n    }\n}\n</script>\n<style lang=\"scss\" scoped>\n@import \"@/assets/style/global/_color.scss\";\n</style>\n<style lang=\"scss\">\n.qrCodeDiv {\n    img {\n        margin: auto;\n    }\n}\n</style>\n"]}]}