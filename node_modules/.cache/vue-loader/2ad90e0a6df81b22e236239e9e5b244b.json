{"remainingRequest":"/Users/jiweiqing/开发/GitHub/jwq-count-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jiweiqing/开发/GitHub/jwq-count-app/src/views/Addr/id/index.vue?vue&type=style&index=1&lang=scss&","dependencies":[{"path":"/Users/jiweiqing/开发/GitHub/jwq-count-app/src/views/Addr/id/index.vue","mtime":1573375666251},{"path":"/Users/jiweiqing/开发/GitHub/jwq-count-app/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/jiweiqing/开发/GitHub/jwq-count-app/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/jiweiqing/开发/GitHub/jwq-count-app/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/jiweiqing/开发/GitHub/jwq-count-app/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jiweiqing/开发/GitHub/jwq-count-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jiweiqing/开发/GitHub/jwq-count-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.qrCodeDiv {\n    img {\n        margin: auto;\n    }\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuFA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/Addr/id","sourcesContent":["<template>\n    <div class=\"addr-box\">\n        <h3 style=\"padding-bottom:1rem;\">房间名称：{{roomInfo.room_name}}</h3>\n        <mt-button type=\"default\">提示：请选择座位入座</mt-button>\n        <div style=\"padding-top:1rem;text-align:left;width:80%;margin:auto;\">\n            <mt-cell\n                v-for=\"(item, idx) in roomInfo.nick_name_list\"\n                :title=\"`座位`+` : `+item\"\n                :key=\"idx\"\n            >\n                <span v-show=\"addrs.indexOf(idx)>-1\">已坐下</span>\n                <mt-button\n                    v-show=\"addrs.indexOf(idx)===-1\"\n                    type=\"primary\"\n                    size=\"small\"\n                    @click=\"selectAddr(item,idx)\"\n                    plain\n                >选择</mt-button>\n            </mt-cell>\n        </div>\n    </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Vue } from \"vue-property-decorator\";\nimport { Toast } from \"mint-ui\";\nimport { getRoomInfo } from \"@/req/count\";\n@Component\nexport default class Home extends Vue {\n    public roomInfo: any = {};\n    public addrs: any = [];\n    public mounted() {\n        window.countFn.updateAddrs = res => {\n            this.updateAddrs(res.addrs);\n        };\n    }\n    public beforeRouteEnter(to, from, next) {\n        next(vm => {\n            vm.getRoomInfo();\n            window.countWs.send(\n                JSON.stringify({\n                    type: \"enterRoom\",\n                    roomId: vm.$route.params.id\n                })\n            );\n        });\n    }\n    public updateAddrs(addrs) {\n        this.addrs = addrs.map(i => Number(i));\n    }\n    public async getRoomInfo() {\n        let roomInfo: any = {};\n        // roomInfo = {\n        //     id: 47,\n        //     room_id: \"1150717815\",\n        //     room_name: \"asdf\",\n        //     count: 123,\n        //     enter_code: \"1234\",\n        //     nick_name_list: \"唐僧,黑熊精,观音,刘备\",\n        //     create_time: \"2019-10-15T14:45:17.000Z\"\n        // };\n        roomInfo = await this.$fn.showMsgResponse(\n            await getRoomInfo({\n                roomId: this.$route.params.id\n            })\n        );\n        roomInfo.nick_name_list = roomInfo.nick_name_list.split(\",\");\n        this.roomInfo = roomInfo;\n    }\n    public selectAddr(item, idx) {\n        window.countWs.send(\n            JSON.stringify({\n                type: \"enterRoom\",\n                roomId: this.$route.params.id,\n                addrId: idx,\n                roleName: item\n            })\n        );\n        this.$router.push({\n            path: `/score/room/${this.$route.params.id}?addr=${idx}`\n        });\n    }\n}\n</script>\n<style lang=\"scss\" scoped>\n</style>\n<style lang=\"scss\">\n.qrCodeDiv {\n    img {\n        margin: auto;\n    }\n}\n</style>\n"]}]}